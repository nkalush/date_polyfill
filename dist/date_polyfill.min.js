!function(window,document){"use strict";function init_input(input){var wrapper=document.createElement("div"),year=document.createElement("input"),month=document.createElement("input"),day=document.createElement("input"),input_style=window.getComputedStyle(input,null);wrapper.setAttribute("class",input.getAttribute("class")),wrapper.classList.add("pf-date-wrapper"),wrapper.style.cssText=input_style.cssText,input.style.display="none",year.style.cssText="border:none;padding:none;width:2.25em",month.style.cssText="border:none;padding:none;width:1.5em",day.style.cssText="border:none;padding:none;width:1.5em",year.classList.add("pf-input-date-year"),month.classList.add("pf-input-date-month"),day.classList.add("pf-input-date-day"),year.setAttribute("type","text"),month.setAttribute("type","text"),day.setAttribute("type","text"),year.setAttribute("value","yyyy"),year.setAttribute("maxlength",4),month.setAttribute("value","mm"),month.setAttribute("maxlength",2),day.setAttribute("value","dd"),day.setAttribute("maxlength",2),wrapper.appendChild(month),wrapper.innerHTML=wrapper.innerHTML+" / ",wrapper.appendChild(day),wrapper.innerHTML=wrapper.innerHTML+" / ",wrapper.appendChild(year),input.outerHTML=input.outerHTML+wrapper.outerHTML}function setValue(len,value){var n=Math.abs(value),zeros=Math.max(0,len-Math.floor(n).toString().length),zeroString=Math.pow(10,zeros).toString().substr(1);0>value&&(zeroString="-"+zeroString),active_field.value=zeroString+n}function upEvent(){""===active_field.value?(active_field.classList.contains("pf-input-date-year")&&setValue(4,date.getFullYear()),active_field.classList.contains("pf-input-date-month")&&setValue(2,date.getMonth()+1),active_field.classList.contains("pf-input-date-day")&&setValue(2,date.getDate())):active_field.classList.contains("pf-input-date-day")?parseInt(active_field.value,10)>=31?setValue(2,1):setValue(2,parseInt(active_field.value,10)+1):active_field.classList.contains("pf-input-date-month")?parseInt(active_field.value,10)>=12?setValue(2,1):setValue(2,parseInt(active_field.value,10)+1):setValue(4,parseInt(active_field.value,10)+1)}function downEvent(){""===active_field.value?(active_field.classList.contains("pf-input-date-year")&&setValue(4,date.getFullYear()),active_field.classList.contains("pf-input-date-month")&&setValue(2,date.getMonth()+1),active_field.classList.contains("pf-input-date-day")&&setValue(2,date.getDate())):active_field.classList.contains("pf-input-date-day")?parseInt(active_field.value,10)<=1?setValue(2,31):setValue(2,parseInt(active_field.value,10)-1):active_field.classList.contains("pf-input-date-month")?parseInt(active_field.value,10)<=1?setValue(2,12):setValue(2,parseInt(active_field.value,10)-1):setValue(4,parseInt(active_field.value,10)-1)}function leftEvent(){var i,inputs=active_field.parentNode.querySelectorAll("input"),len=inputs.length;for(i=0;len>i;i+=1)if(0!==i&&inputs[i]===active_field){inputs[i-1].focus(),active_field=inputs[i-1];break}}function rightEvent(){var i,inputs=active_field.parentNode.querySelectorAll("input"),len=inputs.length;for(i=0;len>i;i+=1)if(i!==len-1&&inputs[i]===active_field){inputs[i+1].focus(),active_field=inputs[i+1];break}}function clickWrapperEvent(e){var firstInput=e.target.querySelector("input");firstInput&&firstInput.focus()}function init(){var i,date_inputs=document.querySelectorAll(".input_date"),len=date_inputs.length;for(i=0;len>i;i+=1)init_input(date_inputs[i]);for(date_inputs=document.querySelectorAll(".pf-date-wrapper"),len=date_inputs.length,i=0;len>i;i+=1)date_inputs[i].addEventListener("click",clickWrapperEvent,!1);document.addEventListener("focus",function(e){(e.target.classList.contains("pf-input-date-year")||e.target.classList.contains("pf-input-date-month")||e.target.classList.contains("pf-input-date-day"))&&(isNaN(parseInt(e.target.value,10))===!0&&(e.target.value=""),active_field=e.target)},!0),document.addEventListener("blur",function(e){e.target.classList.contains("pf-input-date-year")&&""===e.target.value&&(e.target.value="yyyy"),e.target.classList.contains("pf-input-date-month")&&""===e.target.value&&(e.target.value="mm"),e.target.classList.contains("pf-input-date-day")&&""===e.target.value&&(e.target.value="dd"),active_field=null},!0),document.addEventListener("keyup",function(e){if(null!==active_field)switch(e.keyCode){case 38:upEvent();break;case 40:downEvent();break;case 39:rightEvent();break;case 37:leftEvent()}},!1)}var active_field=null,date=new Date;document.addEventListener("DOMContentLoaded",function(){init()})}(window,document);